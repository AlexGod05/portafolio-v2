---
import AccordionItem from "./AccordionItem.astro";

interface Experience {
  position: string;
  startDate: string;
  endDate?: string;
  summary: string;
  highlights: string[];
}

interface Props {
  experiences: Experience[];
}

const { experiences } = Astro.props;
---

<div class="experiences-accordion">
  {experiences.map((experience) => {
    const startYear = new Date(experience.startDate).getFullYear();
    const endYear = experience.endDate 
      ? new Date(experience.endDate).getFullYear() 
      : "Actual";
    
    return (
      <AccordionItem 
        title={
          <div class="position-info">
            <h3>{experience.position}</h3>
            <div class="year-badge">
              <i class="fas fa-calendar-alt"></i>
              <time>{startYear} - {endYear}</time>
            </div>
          </div>
        }
      >
        <div class="experience-content">
          <div class="summary-card">
            <p>{experience.summary}</p>
          </div>
          <div class="highlights-card">
            <h4>Logros y Responsabilidades</h4>
            <ul>
              {experience.highlights.map((highlight) => (
                <li>
                  <span class="bullet">â€¢</span>
                  <span>{highlight}</span>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </AccordionItem>
    );
  })}
</div>

<style>
  .experiences-accordion {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 1rem 0;
  }
</style> 